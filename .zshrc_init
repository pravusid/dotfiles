# Apple x86
if [[ $(uname) == "Darwin" && $(arch) == "i386" ]]; then
  PATH="$PATH"
fi

# Apple Arm
if [[ $(uname) == "Darwin" && $(arch) == "arm64" ]]; then
  PATH="$PATH:/opt/homebrew/bin"
  eval "$(brew shellenv)"
fi

ASDF_DIR="$HOME/.asdf"
FNM_DIR="$HOME/.fnm"
export PATH="$PATH:$HOME/.local/bin:$ASDF_DIR:$FNM_DIR"

# starship
[ -x "$(command -v starship)" ] && eval "$(starship init zsh)"

# asdf
[ -f "$ASDF_DIR/asdf.sh" ] && source $ASDF_DIR/asdf.sh

# fnm
[ -x "$(command -v fnm)" ] && eval "$(fnm env)"

source ~/.zsh-defer/zsh-defer.plugin.zsh

# fzf
export FZF_DEFAULT_COMMAND="fd --type f"
[ -f ~/.fzf.zsh ] && zsh-defer source ~/.fzf.zsh

# broot
[ -f ~/.config/broot/launcher/bash/br ] && zsh-defer source ~/.config/broot/launcher/bash/br

# extra completion
[ -x "$(command -v aws)" ] && complete -C aws_completer aws
[ -f "$ASDF_DIR/completions/asdf.bash" ] && zsh-defer source $ASDF_DIR/completions/asdf.bash
# tabtab source for packages (pnpm)
[[ -f ~/.config/tabtab/zsh/__tabtab.zsh ]] && zsh-defer source ~/.config/tabtab/zsh/__tabtab.zsh || true
